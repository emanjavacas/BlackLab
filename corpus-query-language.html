<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2016-08-23 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160823" />
    <meta http-equiv="Content-Language" content="en" />
    <title>BlackLab &#x2013; Corpus Query Language</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.4.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.4.min.js"></script>

                          
        
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Nunito:300"/>
          
                  </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                                                                                                <img src="images/logo-blacklab.png"  alt="BlackLab"/>
                </div>
                      </div>
        <div class="pull-right">                  <a href="http://www.inl.nl/" id="bannerRight">
                                                                                                <img src="images/logo-inl.png"  alt="INL"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="http://www.inl.nl/" class="externalLink" title="INL">
        INL</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="index.html" title="BlackLab">
        BlackLab</a>
                    <span class="divider">/</span>
      </li>
        <li class="active ">Corpus Query Language</li>
        
                
                    
                  <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2016-08-23</li>
              <li id="projectVersion" class="pull-right">
                    Version: 1.6.0-SNAPSHOT
        </li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">BlackLab</li>
                              
      <li>
  
                          <a href="index.html" title="Introduction">
          <span class="none"></span>
        Introduction</a>
            </li>
                                                                                                                                                                                                                      
      <li>
  
                          <a href="learn.html" title="Learn">
          <span class="icon-chevron-down"></span>
        Learn</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="getting-started.html" title="Getting Started">
          <span class="none"></span>
        Getting Started</a>
            </li>
                    
      <li class="active">
  
            <a href="#"><span class="none"></span>Corpus Query Language</a>
          </li>
                    
      <li>
  
                          <a href="blacklab-server-overview.html" title="BlackLab Server overview">
          <span class="none"></span>
        BlackLab Server overview</a>
            </li>
                    
      <li>
  
                          <a href="blacklab-server-different-languages.html" title="Using BlackLab Server from different languages">
          <span class="none"></span>
        Using BlackLab Server from different languages</a>
            </li>
                    
      <li>
  
                          <a href="indexing-with-blacklab.html" title="Indexing with BlackLab">
          <span class="none"></span>
        Indexing with BlackLab</a>
            </li>
                    
      <li>
  
                          <a href="add-input-format.html" title="Add An Input Format">
          <span class="none"></span>
        Add An Input Format</a>
            </li>
                    
      <li>
  
                          <a href="improve-search-speed.html" title="Improve Search Speed">
          <span class="none"></span>
        Improve Search Speed</a>
            </li>
                    
      <li>
  
                          <a href="apidocs/index.html" title="API reference">
          <span class="none"></span>
        API reference</a>
            </li>
                    
      <li>
  
                          <a href="file-formats.html" title="File formats">
          <span class="none"></span>
        File formats</a>
            </li>
              </ul>
        </li>
                
      <li>
  
                          <a href="downloads.html" title="Downloads">
          <span class="none"></span>
        Downloads</a>
            </li>
                
      <li>
  
                          <a href="faq.html" title="FAQ">
          <span class="none"></span>
        FAQ</a>
            </li>
                
      <li>
  
                          <a href="changelog.html" title="Change Log">
          <span class="none"></span>
        Change Log</a>
            </li>
                
      <li>
  
                          <a href="roadmap.html" title="Road Map">
          <span class="none"></span>
        Road Map</a>
            </li>
                
      <li>
  
                          <a href="newsletter.html" title="Newsletter">
          <span class="none"></span>
        Newsletter</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                                      
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Corpus Query Language</h1>
<p>BlackLab supports Corpus Query Language, a full-featured query language introduced by the Corpus WorkBench (CWB) and also supported by the Lexicom Sketch Engine. It is a standard and powerful way of searching corpora.</p>
<p>The basics of Corpus Query Language is the same in all three projects, but in there are a few minor differences in some of the more advanced features, as well as some features that are exclusive to some projects. For most queries however, this will not be an issue.</p>
<p>This page will introduce the query language and show all features that BlackLab supports. If you want to compare, see <a class="externalLink" href="http://cwb.sourceforge.net/files/CQP_Tutorial/" title="http://cwb.sourceforge.net/files/CQP_Tutorial/">CWB CQL</a> and <a class="externalLink" href="http://www.sketchengine.co.uk/documentation/wiki/SkE/CorpusQuerying" title="http://www.sketchengine.co.uk/documentation/wiki/SkE/CorpusQuerying">Sketch Engine CQL</a>.</p>
<div class="section">
<h2><a name="Matching_tokens"></a>Matching tokens</h2>
<p>Corpus Query Language is a way to specify a &#x201c;pattern&#x201d; of tokens (i.e. words) you&#x2019;re looking for. A simple pattern is this one:</p>

<div class="source">
<div class="source"><pre class="prettyprint">[word=&quot;man&quot;]
</pre></div></div>
<p>This simply searches for all occurrences of the word &#x201c;man&#x201d;. If your corpus includes the per-word properties lemma (i.e. headword) and pos (part-of-speech, i.e. noun, verb, etc.), you can query those as well. For example, to find a form of word &#x201c;search&#x201d; used as a noun, use this query:</p>

<div class="source">
<div class="source"><pre class="prettyprint">[lemma=&quot;search&quot; &amp; pos=&quot;NOU&quot;]
</pre></div></div>
<p>This query would match &#x201c;search&#x201d; and &#x201c;searches&#x201d; where used as a noun. (Of course, your data may contain slightly different part-of-speech tags.)</p>
<p>The first query could be written even simpler without brackets, because &#x201c;word&#x201d; is the default property:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&quot;man&quot;
</pre></div></div>
<p>You can use the &#x201c;does not equal&#x201d; operator (!=) to search for all words except nouns:</p>

<div class="source">
<div class="source"><pre class="prettyprint">[pos != &quot;NOU&quot;]
</pre></div></div>
<p>The strings between quotes can also contain wildcards, of sorts. To be precise, they are <a class="externalLink" href="http://en.wikipedia.org/wiki/Regular_expression" title="http://en.wikipedia.org/wiki/Regular_expression">regular expressions</a>, which provide a flexible way of matching strings of text. For example, to find &#x201c;man&#x201d; or &#x201c;woman&#x201d;, use:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&quot;(wo)?man&quot;
</pre></div></div>
<p>And to find lemmata starting with &#x201c;under&#x201d;, use:</p>

<div class="source">
<div class="source"><pre class="prettyprint">[lemma=&quot;under.\*&quot;]
</pre></div></div>
<p>Explaining regular expression syntax is beyond the scope of this document, but for a complete overview, see <a class="externalLink" href="http://www.regular-expressions.info/" title="http://www.regular-expressions.info/">here</a>.</p></div>
<div class="section">
<h2><a name="Sequences"></a>Sequences</h2>
<p>Corpus Query Language allows you to search for sequences of words as well (i.e. phrase searches, but with many more possibilities). To search for the phrase &#x201c;the tall man&#x201d;, use this query:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&quot;the&quot; &quot;tall&quot; &quot;man&quot;
</pre></div></div>
<p>It might seem a bit clunky to separately quote each word, but this allow us the flexibility to specify exactly what kinds of words we&#x2019;re looking for. For example, if you want to know all single adjectives used with man (not just &#x201c;tall&#x201d;), use this:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&quot;an?|the&quot; [pos=&quot;ADJ&quot;] &quot;man&quot;
</pre></div></div>
<p>This would also match &#x201c;a wise man&#x201d;, &#x201c;an important man&#x201d;, &#x201c;the foolish man&#x201d;, etc.</p></div>
<div class="section">
<h2><a name="Token-level_regular_expression_operators"></a>Token-level regular expression operators</h2>
<p>Corpus Query Language really starts to shine when you use the regular expression operators on whole tokens as well. If we want to see not just single adjectives applied to &#x201c;man&#x201d;, but multiple as well:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&quot;an?|the&quot; [pos=&quot;ADJ&quot;]+ &quot;man&quot;
</pre></div></div>
<p>This query matches &#x201c;a little green man&#x201d;, for example. The plus sign after [pos=&#x201c;ADJ&#x201d;] says that the preceding part should occur one or more times (similarly, * means &#x201c;zero or more times&#x201d;, and ? means &#x201c;zero or one time&#x201d;).</p>
<p>If you only want matches with two or three adjectives, you can specify that too:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&quot;an?|the&quot; [pos=&quot;ADJ&quot;]{2,3} &quot;man&quot;
</pre></div></div>
<p>Or, for two or more adjectives:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&quot;an?|the&quot; [pos=&quot;ADJ&quot;]{2,} &quot;man&quot;
</pre></div></div>
<p>You can group sequences of tokens with parentheses and apply operators to the whole group as well. To search for a sequence of nouns, each optionally preceded by an article:</p>

<div class="source">
<div class="source"><pre class="prettyprint">(&quot;an?|the&quot;? [pos=&quot;NOU&quot;])+
</pre></div></div>
<p>This would, for example, match the well-known palindrome &#x201c;a man, a plan, a canal: Panama!&#x201d; (A note about punctuation: in BlackLab, punctuation tends to not be indexed as a separate token, but as a property of a word token - CWB and Sketch Engine on the other hand tend to index punctuation as a separate token instead. You certainly could choose to index punctuation as a separate token in BlackLab, by the way &#x2013; it&#x2019;s just not commonly done. Both approaches have their advantages and disadvantages, and of course the choice affects how you write your queries.)</p></div>
<div class="section">
<h2><a name="Case-_and_diacritics_sensitivity"></a>Case- and diacritics sensitivity</h2>
<p>CWB and Sketch Engine both default to (case- and diacritics) sensitive search. That is, they exactly match upper- and lowercase letters in your query, plus any accented letters in the query as well. BlackLab, on the contrary, defaults to *IN*sensitive search (although this default can be changed if you like). To match a pattern sensitively, prefix it with &#x201c;(?c)&#x201d;:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&quot;(?c)Panama&quot;
</pre></div></div>
<p>If you&#x2019;ve changed the default search to sensitive, but you wish to match a pattern in your query insensitively, prefix it with &#x201c;(?i)&#x201d;:</p>

<div class="source">
<div class="source"><pre class="prettyprint">[pos=&quot;(?i)nou&quot;]
</pre></div></div>
<p>Although BlackLab is capable of setting case- and diacritics-sensitivity separately, it is not yet possible from Corpus Query Language. We may add this capability if requested.</p></div>
<div class="section">
<h2><a name="Matching_XML_elements"></a>Matching XML elements</h2>
<p>Corpus Query Language allows you to find text in relation to XML elements that occur in it. For example, if your data contains sentence tags, you could look for sentences starting with &#x201c;the&#x201d;:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;s&gt;&quot;the&quot;
</pre></div></div>
<p>Similarly, to find sentences ending in &#x201c;that&#x201d;, you would use:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&quot;that&quot;&lt;/s&gt;
</pre></div></div>
<p>You can also search for words occurring inside a specific element. Say you&#x2019;ve run named entity recognition on your data and all person names are surrounded with &lt;person&gt;&#x2026;&lt;/person&gt; tags. To find the word &#x201c;baker&#x201d; as part of a person&#x2019;s name, use:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&quot;baker&quot; within &lt;person/&gt;
</pre></div></div>
<p>Note that forward slash at the end of the tag. This way of referring to the element means &#x201c;the whole element&#x201d;. Compare to &lt;person&gt;, which means &#x201c;the element&#x2019;s open tag&#x201d;, and &lt;/person&gt;, which means &#x201c;the element&#x2019;s close tag&#x201d;.</p>
<p>The above query will just match the word &#x201c;baker&#x201d; as part of a person&#x2019;s name. But you&#x2019;re likely more interested in the entire name that contains the word &#x201c;baker&#x201d;. So, to find those full names, use:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;person/&gt; containing &quot;baker&quot;
</pre></div></div>
<p>Or, if you simply want to find all persons, use:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;person/&gt;
</pre></div></div>
<p>As you can see, the XML element reference is just another query that yields a number of matches. So as you might have guessed, you can use &#x201c;within&#x201d; and &#x201c;containing&#x201d; with any other query as well. For example:</p>

<div class="source">
<div class="source"><pre class="prettyprint">([pos=&quot;ADJ&quot;]+ containing &quot;tall&quot;) &quot;man&quot;
</pre></div></div>
<p>will find adjectives applied to man, where one of those adjectives is &#x201c;tall&#x201d;.</p></div>
<div class="section">
<h2><a name="Capturing_groups"></a>Capturing groups</h2>
<p>Just like in regular expressions, it is possible to &#x201c;capture&#x201d; part of the match for your query in a &#x201c;group&#x201d;.</p>
<p>CWB and Sketch Engine offer similar functionality, but instead of capturing part of the query, they label a single token. BlackLab&#x2019;s functionality is very similar but can capture a number of tokens as well.</p>
<p>Example:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&quot;an?|the&quot; Adjectives:[pos=&quot;ADJ&quot;]+ &quot;man&quot;
</pre></div></div>
<p>This will capture the adjectives found for each match in a captured group named &#x201c;Adjectives&#x201d;. BlackLab also supports numbered groups:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&quot;an?|the&quot; 1:[pos=&quot;ADJ&quot;]+ &quot;man&quot;
</pre></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2016
                        <a href="http://www.inl.nl">Instituut voor Nederlandse Taal (INT)</a>.
            All rights reserved.      
                    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
